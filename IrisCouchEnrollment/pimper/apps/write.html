<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Write</title>
    <script>
      window.addEventListener('storage', function(e) {
        if(e.key=='LibreDocsState') {
          console.log('LibreDocsState '+e.newValue+' received');
          if(e.newValue == 'exit') {
            window.close();
          } else if(e.newValue == 'offline') {
            document.getElementById('spinner').style.display='block';
          } else {
            document.getElementById('spinner').style.display='none';
          }
        }
      }, false);
      function displayText() {
        if(localStorage.getItem('text') != null) {
          document.getElementById('text').value=localStorage.getItem('text');
        }
      }
    </script>
    <style>
      * { padding:0; margin:0; border:0; outline:0; }
      html { overflow-x:hidden; overflow-y:hidden; }
      textarea { position:absolute; padding:10% 20%; font:2em FreeSans,Helvetica,sans-serif; color:#333; background:#eee; text-shadow:0 0 1px #666677; width:60%; height:80%; overflow-x:hidden; overflow-y:auto; resize:none; }
    </style>

  </head>
  <body onload="displayText();">
    <img src="spinner.gif" style="display:none" id="spinner">
    <textarea id="text" onkeyup="localStorage.setItem('text', this.value);" autofocus>
This is a remoteStorage demo.

Quickstart option:
1) sign up at http://iriscouch.com/
2) log in on the top right as you@iriscouch.com
3) you will be redirected to our auth proxy service, yourremotestorage.net
4) warning: this is alpha code, so don't use a valuable password here
5) authorize this app to store data on your remote storage.

For other CouchDB providers too, you can use our centralized proxy simply with:
    you@domain.com
to:
    http://you.domain.com/_utils/

To be really free, implement webfinger on your indie web domain,
and host the CouchDB proxy yourself.

Happy writing!
    </textarea>
  </body>
</html>

