(function() {
  var sausage = {'body': document.body.innerHTML}
  var hash='7996ff45cf4d140398d729accc6c6c0a6b66fb89'
  var url= 'http://yourremotestorage.com/apps/unhosted/compat.php/mich/unhosted/webdav/yourremotestorage.com/mich/apptorrent/'+hash

  var x = new XMLHttpRequest()
  x.open('PUT', url, true)
  x.setRequestHeader('Authorization', 'Basic bWljaEB5b3VycmVtb3Rlc3RvcmFnZS5jb206NGU3N2E0NDUyMGRkOA==')
  x.send(JSON.stringify(sausage))
  x.onreadystatechange = function() {
    if(x.readyState == 4) {
      if((x.status == 200) || (x.status == 201)) {
        //become a script that creates a link and then clicks it:
        document.write('<script>'
          + 'document.write(\'<a id="resetMyScriptParent" href="javascript:'
            //js to load js, inside a url inside a link inside a script inside a url inside bookmarklet
            + '(function(){'
              + 'var x = new XMLHttpRequest();'
              + 'x.open(\\\'GET\\\', \\\'http://yourremotestorage.com/apps/unhosted/compat.php/mich/unhosted/webdav/yourremotestorage.com/mich/apptorrent/7996ff45cf4d140398d729accc6c6c0a6b66fb89\\\', false);'
              + 'x.send();'
              + 'localStorage.setItem(\\\'app\\\', x.responseText);'
              + 'location=\\\'http://7996ff45cf4d140398d729accc6c6c0a6b66fb89.apptorrent.net/#!/eval(localStorage.getItem(\\\\\\\'app\\\\\\\'))\\\''
            + '})()'
          + '"></a>\');'
          + 'document.getElementById(\'resetMyScriptParent\').click()'
          + '</script>')
      }
    }
  }
})()
