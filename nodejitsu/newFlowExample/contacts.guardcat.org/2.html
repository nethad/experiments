<!DOCTYPE html>
<html lang="en">
<head>
<script>
function bodyOnload() {
  var assertion = decodeURIComponent(location.search.split('=')[1]);
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/verifier', true);
  xhr.onreadystatechange = function() {
    if(xhr.readyState == 4) {
      try {
        var response = JSON.parse(xhr.responseText);
        document.getElementById('1').innerHTML = 'Your user address is '+response.email+'; GuardCat is connecting to your "<b>contacts</b>" category...';
        //remoteStorage.configure({userAddress: response.email});
        location = 'http://yourremotestorage.com/';
      } catch(e) {
        document.getElementById('1').innerHTML = 'Njet robotet :(';
      }
    }
  }
  xhr.send(assertion);
}
</script>
</head>
<body onload="bodyOnload();">
<h2>GuardCat says meow!</h2>
<div id="1">
GuardCat is connecting to your "<b>contacts</b>" category...<br>
</div>

</body>
</html>
